
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="">
	<!-- <link rel="shortcut icon" href="../../assets/ico/favicon.png"> -->

	<title>091: Medical Appointment Sequence Scheduling Problem (MASSP)</title>

	<!-- Bootstrap core CSS -->
	<link href="/bootstrap/css/bootstrap.css" rel="stylesheet">

	<link href="/css/main.css" rel="stylesheet">
	<script src="/js/jquery.min.js" ></script>

	<!-- Enable table sorting -->
	<script src="/js/tablesorter/jquery.tablesorter.min.js"></script>
	<link rel="stylesheet" href="/js/tablesorter/blue/style.css" type="text/css"/>
	<script type="text/javascript">
	$(function() {
		$(".tablesorter").tablesorter();
	});
	</script>

	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML.js">
	MathJax.Hub.Config({
	  	tex2jax: {
	    inlineMath: [['$','$'], ['\\(','\\)']],
	    processEscapes: true
	  	}
	});
	</script>

  
	<link type="text/css" rel="stylesheet" href="/syntax_highlighter/shCoreDefault.css"/>

</head>

<body>

	<ol class="breadcrumb">
    	  <li><a href="/">CSPLib</a></li>

  <li><a href="/Problems">Problems</a></li>
  <li><a href="/Problems/prob091">prob091</a></li>

  <li><a href="/Problems/prob091/data">Data</a></li>
  <li>MASPConfigLarge.java</li>
	</ol>

	<div class="container">

		<div class="page-header">
			<h1>091: Medical Appointment Sequence Scheduling Problem (MASSP)</h1>


<!-- macro to Not made a link if on the page the link links to -->


<header class="nav-header">
<div class="nav-container">
  <nav class="nav">
  <ul>
     	<li><a href="/Problems/prob091/">Specification</a></li>

     	<li><a href="/Problems/prob091/data">Data files</a></li>

     	<li><a href="/Problems/prob091/results">Results</a></li>

     	<li><a href="/Problems/prob091/references">References</a></li>

     	<li><a href="/Problems/prob091/models">Models</a></li>

     	<li><a href="/Problems/prob091/cite">Cite</a></li>

    <li><a href="/Problems/prob091.json" >Json</a></li>

    <li style="float:right"><a href="https://github.com/csplib/csplib/blob/master/Problems/prob091/data/MASPConfigLarge.java">Edit Page</a></li>
  </ul>
  </nav>
</div>
</header>


		</div>


<a href="/Problems/prob091/data/MASPConfigLarge.java">Download</a>
<pre class ='brush: java'>package com.example.massp;

import java.util.List;
import java.util.Map;
import java.util.ArrayList;
import java.util.Arrays;

import com.example.massp.Appointment;
import com.example.massp.ResourceType;


public class MASPConfigLarge {


    /* Resource domain (IDs) definitions */
    public static final int[] CARDIOLOGY_DOMAIN = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9}; // Identifiers of resources in the Cardiology domain
    public static final int[] NEUROLOGY_DOMAIN = {10, 11, 12, 13, 14, 15, 16, 17, 18, 19}; // Identifiers of resources in the Neurology domain
    public static final int[] CURRENT_WORKLOAD = {20, 10, 5, 10, 40, 30, 20, 10, 10, 50, 70, 80, 10, 15, 20, 25, 15, 60, 70, 60}; //current workload of resources
 
    public static final int SLOTS_PER_DAY = 24; // Number of time slots per day
    
    /* Resource calendars, each resource calendar is represented by an integer array of available slot identifiers */
    /* Resource calendar = 9 days x 24 slots */
    /* Each calendar starts with Monday (0) at 8:00 -15:00 */
    public static final int[] RESOURCE_CALENDARS = {
        0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, // Mo (0) 07.07.2025
        24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, // Tu (1) 08.07.2025
        48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, // We (2) 09.07.2025
        72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, // Th (3) 10.07.2025
        96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, // Fr (4) 11.07.2025
        -1, -2, -3, -4, -5, -6, -7, -8, -9, -10, -11, -12, -13, -14, -15, -16, -17, -18, -19, -20, -21, -22, -23, -24, // Sa (5) 12.07.2025
        -25, -26, -27, -28, -29, -30, -31, -32, -33, -34, -35, -36, -37, -38, -39, -40, -41, -42, -43, -44, -45, -46, -47, -48, // Su (6) 13.07.2025
        168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, // Mo (7) 14.07.2025
        192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, // Tu (8) 15.07.2025
        216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, // We (9) 16.07.2025
        240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262, 263, // Th (10) 17.07.2025
        264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285, 286, 287, // Fr (11) 18.07.2025
        288, 289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299, 300, 301, 302, 303, 304, 305, 306, 307, 308, 309, 310, 311, 312, // Sa (12) 19.07.2025
        -313, -314, -315, -316, -317, -318, -319, -320, -321, -322, -323, -324, -325, -326, -327, -328, -329, -330, -331, -332, -333, -334, -335, // Su (13) 20.07.2025
        336, 337, 338, 339, 340, 341, 342, 343, 344, 345, 346, 347, 348, 349, 350, 351, 352, 353, 354, 355, 356, 357, 358, 359, // Mo (14) 21.07.2025
        360, 361, 362, 363, 364, 365, 366, 367, 368, 369, 370, 371, 372, 373, 374, 375, 376, 377, 378, 379, 380, 381, 382, 383, // Tu (15) 22.07.2025
        384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 406, 407, // We (16) 23.07.2025
        408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 426, 427, 428, 429, 430, 431, // Th (17) 24.07.2025
        432, 433, 434, 435, 436, 437, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454, 455  // Fr (18) 25.07.2025
    };

    // Global calendar, which is a combination of all resource calendars, and determines the facility availability
    public static final int[] GLOBAL_CALENDAR = {
        0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, // Mo (0) 07.07.2025
        24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, // Tu (1) 08.07.2025
        48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, // We (2) 09.07.2025
        72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, // Th (3) 10.07.2025
        96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, // Fr (4) 11.07.2025
        120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, // Sa (5) 12.07.2025
        -145,-146, -147, -148, -149, -150, -151, -152, -153, -154, -155, -156, -157, -158, -159, -160, -161, -162, -163, -164, -165, -166, -167,  // Su (6) 13.07.2025
        168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, // Mo (7) 14.07.2025
        192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, // Tu (8) 15.07.2025
         216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, // We (9) 16.07.2025
        240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262, 263, // Th (10) 17.07.2025
        264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285, 286, 287, // Fr (11) 18.07.2025
        288, 289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299, 300, 301, 302, 303, 304, 305, 306, 307, 308, 309, 310, 311, 312, // Sa (12) 19.07.2025
        -313, -314, -315, -316, -317, -318, -319, -320, -321, -322, -323, -324, -325, -326, -327, -328, -329, -330, -331, -332, -333, -334, -335, // Su (13) 20.07.2025
        336, 337, 338, 339, 340, 341, 342, 343, 344, 345, 346, 347, 348, 349, 350, 351, 352, 353, 354, 355, 356, 357, 358, 359, // Mo (14) 21.07.2025
        360, 361, 362, 363, 364, 365, 366, 367, 368, 369, 370, 371, 372, 373, 374, 375, 376, 377, 378, 379, 380, 381, 382, 383, // Tu (15) 22.07.2025
        384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 406, 407, // We (16) 23.07.2025
        408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 426, 427, 428, 429, 430, 431, // Th (17) 24.07.2025
        432, 433, 434, 435, 436, 437, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454, 455  // Fr (18) 25.07.2025
    };

 // Sequence of predefined appointments
    public static final Map&lt;Integer, Appointment&gt; sequence = Map.of(
        1, new Appointment(1, List.of(ResourceType.CARDIOLOGY), 2),
        2, new Appointment(2, List.of(ResourceType.NEUROLOGY), 2),
        3, new Appointment(3, List.of(ResourceType.CARDIOLOGY), 4)
    );

    public static final List&lt;Integer&gt; order = List.of(1,2,3); // Order of appointments in the sequence by their IDs
    public static final ArrayList&lt;Integer&gt; chronologicalOrder = new ArrayList&lt;&gt;(order);


    public static final List&lt;SameResources&gt; sameResourcesConstraints = List.of(
        new SameResources(1, 1, 3, 1) // Appointment 1's first resource and Appointment 3's first resource must be the same
    );


    // min_distance[i][j] = minimum gap (slots) between appointment i and j
    // -1 means no constraint
    public static final int[][] min_distance = {
        {-1,  -1, -1},  // distances from appointment 1
        {-1, -1,  -1},  // distances from appointment 2
        {-1, -1, -1}   // distances from appointment 3
    };

    // max_distance[i][j] = maximum allowed gap (slots) between appointment i and j
    // 0 means no upper bound
    public static final int[][] max_distance = {
        { 0,  5,  0},  
        { 0,  0, 4},  
        { 0,  0,  0}   
    };

    public static final int[] patient_absence_dates={0,4};// patient is absent on Monday (0) and Friday (4)


    public static final Map&lt;Integer, List&lt;Integer&gt;&gt; sameResource = Map.of(
        1, List.of(0, -1),
        2, List.of(-1, -1),
        3, List.of(0, -1)
    );


   // Find the appointment with the longest list of required resources
    public static Appointment getAppointmentWithMostResources() {
        return sequence.values().stream()
                .max((a1, a2) -&gt; Integer.compare(
                        a1.getRequiredResources().size(),
                        a2.getRequiredResources().size()))
                .orElse(null); // return null if sequence is empty
    }

    public static int getTotalNumberOfResources() {
        return sequence.values().stream()
                .flatMap(appointment -&gt; appointment.getRequiredResources().stream())
                .mapToInt(resourceType -&gt; 1)
                .sum();
    }

    public static int getMaxAppointmentDuration() {
    return sequence.values().stream()
            .mapToInt(Appointment::getDurationInSlot)
            .max()
            .orElse(0); // return 0 if no appointments
}



    // Create a filtered version of GLOBAL_CALENDAR without negative values
    public static int[] getFilteredGlobalCalendar() {
        return Arrays.stream(GLOBAL_CALENDAR)
                    .filter(value -&gt; value &gt;= 0)
                    .toArray();
    }


    // Create a filtered version of RESOURCE_CALENDARS without negative values
    public static int[] getFilteredResourceCalendar() {
        return Arrays.stream(RESOURCE_CALENDARS)
                    .filter(value -&gt; value &gt;= 0)
                    .toArray();
    }

    public static int getGlobalResourceIndex(int appId, int rsourcePositionInAppointment){

        int index =0;

        for (int i=0;i&lt;sequence.size();i++){
            if(sequence.get(i+1).getId()==appId){
                return index + (rsourcePositionInAppointment-1);
            }
        
            index += sequence.get(i+1).getRequiredResources().size();
        }
        
        throw new IllegalArgumentException("Appointment " + appId + " not found");

     }

}
</pre>


	</div>


<!-- Syntax highlighter  -->
<script type="text/javascript" src="/syntax_highlighter/shCore.js"></script>
<script type="text/javascript" src="/syntax_highlighter/shAutoloader.js" ></script>
<script type="text/javascript">
    SyntaxHighlighter.autoloader(

    // Languages that have a language page in csplib
    // Only the Title from specification.md converted to lower case should be used.
    ['comet',        '/js/shBrushComet.js'],
    ['eclipse',      '/js/shBrushECLiPSe.js'],
    ['essence',      '/js/shBrushEssence.js'],
    ['essenceprime', '/js/shBrushEssencePrime.js'],
    ['minizinc',     '/js/shBrushMiniZinc.js'],


    // Standard Programming languages
    ['cpp','hpp','hh','cc','h','c', '/syntax_highlighter/shBrushCpp.js'],
    ['erl','hrl', '/syntax_highlighter/shBrushErlang.js'] ,
    ['cs'       , '/syntax_highlighter/shBrushCSharp.js'] ,
    ['groovy'   , '/syntax_highlighter/shBrushGroovy.js'] ,
    ['java'     , '/syntax_highlighter/shBrushJava.js']   ,
    ['js'       , '/syntax_highlighter/shBrushJScript.js'],
    ['php'      , '/syntax_highlighter/shBrushPhp.js']    ,
    ['pl'       , '/syntax_highlighter/shBrushPerl.js']   ,
    ['py'       , '/syntax_highlighter/shBrushPython.js'] ,
    ['rb'       , '/syntax_highlighter/shBrushRuby.js']   ,
    ['scala'    , '/syntax_highlighter/shBrushScala.js']  ,
    ['xml'      , '/syntax_highlighter/shBrushXml.js']
 	);

	SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>


</div>

<div id="footer">

    <center><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a> This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>. </center>

</div>
  <!-- float footer to bottom of page -->
  <script>

    $(document).ready(function() {

     var docHeight = $(window).height();
     var footerHeight = $('#footer').height();
     var footerTop = $('#footer').position().top + footerHeight;

     if (footerTop + 20 < docHeight) {
      $('#footer').css('margin-top',  (docHeight - (footerTop + 20)) + 'px');
     }
    });
   </script>
</body>

</html>